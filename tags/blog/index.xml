<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Blog on Shirakii</title><link>/tags/blog/</link><description>Recent content in Blog on Shirakii</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>Shirakii</copyright><lastBuildDate>Tue, 05 Mar 2024 01:44:58 +0800</lastBuildDate><atom:link href="/tags/blog/index.xml" rel="self" type="application/rss+xml"/><item><title>å°†èŒèŒè®¡æ•°å™¨éƒ¨ç½²åˆ° Cloudflare Workers</title><link>/post/moe-counter-cf/</link><pubDate>Tue, 05 Mar 2024 01:44:58 +0800</pubDate><guid>/post/moe-counter-cf/</guid><description>&lt;img src="/post/moe-counter-cf/cover.webp" alt="Featured image of post å°†èŒèŒè®¡æ•°å™¨éƒ¨ç½²åˆ° Cloudflare Workers" />&lt;p>&lt;strong>æœ¬ç¯‡ä»…ä¸º&lt;a class="link" href="https://champhoon.xyz/note/moe-counter-cf/" target="_blank" rel="noopener"
>champhoon&lt;/a>å¤§ä½¬æ–‡ç« åœ¨å®é™…éƒ¨ç½²è¿‡ç¨‹ä¸­çš„è¡¥å……&lt;/strong>&lt;/p>
&lt;p>åœ¨å®‰è£…&lt;code>Wrangler-CLI&lt;/code>è¿‡ç¨‹ä¸­å‘½ä»¤è¡Œæç¤ºv1ç‰ˆæœ¬å·²ç»ä¸å†ç»´æŠ¤ï¼Œç›®å‰å·²ç»æ›´æ–°è‡³v3ï¼Œnpmé¡¹ç›®çš„åœ°å€ä¸º&lt;a class="link" href="https://www.npmjs.com/package/wrangler" target="_blank" rel="noopener"
>wrangler&lt;/a>&lt;/p>
&lt;p>ç”±äºç‰ˆæœ¬æ›´æ–°åŸæ–‡ç« ä¸­è®¸å¤šå‘½ä»¤å¹¶ä¸é€‚ç”¨ï¼Œå…·ä½“å¯å‚è€ƒ&lt;a class="link" href="https://developers.cloudflare.com/workers/wrangler/install-and-update/" target="_blank" rel="noopener"
>å®˜æ–¹æ–‡æ¡£&lt;/a>&lt;/p>
&lt;p>å®‰è£…wrangler&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">npm install wrangler --save-dev
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>npx wrangler --version&lt;/code>è¿è¡Œæ­£ç¡®å³å®‰è£…æˆåŠŸ&lt;/p>
&lt;p>ç™»å½•wrangler&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">npx wrangler login
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>éœ€è¦å‘½ä»¤è¡Œä¸­æ˜¾ç¤ºsuccessï¼Œå¦‚ä¸è¡Œå»ºè®®å¼€å…¨å±€ä»£ç†&lt;/p>
&lt;p>å¦‚æœ&lt;code>wrangler.toml&lt;/code>ä½ æŒ‰åŸæ–‡ç« èµ°æµç¨‹äº†ä¹Ÿè¡Œï¼Œåªéœ€åœ¨ç¬¬äºŒè¡ŒåŠ è¡Œ&lt;code>main = &amp;quot;dist/worker&amp;quot;&lt;/code>&lt;/p>
&lt;p>åç»­å°±å’ŒåŸæ–‡ç« ä¸€æ ·ï¼Œåœ¨åŒæ ·å‘½ä»¤å‰åŠ npxå³å¯ï¼Œç”±äºæˆ‘åœ¨é¡¹ç›®ä¸­çš„pnpmä¸­å¡ä½ï¼Œä¸€ç›´æ˜¾ç¤ºRunning postinstall script&amp;hellip;&lt;/p>
&lt;p>å› æ­¤æˆ‘ç›´æ¥åœ¨cmdä¸­&lt;code>npm install&lt;/code>webpackå’Œwebpack-cliï¼Œå¦‚æœè¿˜æœ‰å…¶å®ƒçš„ä¹Ÿé¡ºæ‰‹å®‰è£…ï¼Œæœ€åéƒ¨ç½²&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cd moe-counter-cf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">npx wrangler deploy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>å¦‚æœæ˜¾ç¤ºError fetch failedå¤§æ¦‚ç‡æ˜¯å› ä¸ºcloudflareçš„apiåœ¨ä¸­å›½å¤§é™†è¢«å¢™äº†æˆ–è€…ä½ è¿˜æ²¡ç™»å½•wrangleï¼Œå¯ä»¥å¼€å…¨å±€ä»£ç†è¯•è¯•ã€‚å‘½ä»¤è¡Œæœ€åæ˜¾ç¤º&lt;code>Deployment ID&lt;/code>åº”è¯¥å°±æ˜¯æˆåŠŸäº†ã€‚&lt;/p>
&lt;p>æœ€åè¿›å…¥è‡ªå·±çš„åŸŸå&lt;code>counter.example.com&lt;/code>ï¼Œå¦‚æœå¸Œæœ›demoé¡µæ­£å¸¸æ˜¾ç¤ºå°±è¿›å…¥&lt;code>src/routes/index.html&lt;/code>æ”¹ä¸€ä¸‹imgåœ°å€&lt;/p>
&lt;p>æ€»ä¹‹ç»ˆäºèƒ½å›½å†…æ­£å¸¸è®¿é—®ç½‘å€äº†å¥½å¼€å¿ƒï¼Œè™½ç„¶ä»¥å‰çš„6kæµè§ˆé‡æ²¡äº†ğŸ˜­(æ°´åˆ†å¾ˆå¤§)&lt;/p>
&lt;figure>
&lt;img loading="lazy" src="https://counter.shirakii.com/shirakii:home?theme=asoul"/>
&lt;/figure>
&lt;p>å†æ¬¡æ„Ÿè°¢&lt;a class="link" href="https://champhoon.xyz/note/moe-counter-cf/" target="_blank" rel="noopener"
>champhoon&lt;/a>å’Œ&lt;a class="link" href="https://blog.dsrkafuu.net/" target="_blank" rel="noopener"
>dsrkafuu&lt;/a>ï¼Œä»¥åŠåŸä½œè€…&lt;a class="link" href="https://github.com/journey-ad" target="_blank" rel="noopener"
>journey-ad&lt;/a>&lt;/p>
&lt;h1 id="åè®°">åè®°&lt;/h1>
&lt;div class="video-wrapper">
&lt;video
loop
muted
src="videos/cover.mp4"
autoplay
>
&lt;p>
Your browser doesn't support HTML5 video. Here is a
&lt;a href="videos/cover.mp4">link to the video&lt;/a> instead.
&lt;/p>
&lt;/video>
&lt;/div>
&lt;p>æœ¬æ¥æƒ³æŠŠè¿™ä¸ªå½“å°é¢çš„ï¼Œç»“æœwebpæ•ˆæœå¥½ç‚¹è¦7Mï¼Œè€ƒè™‘åˆ°ç½‘é€Ÿè¿˜æ˜¯ç®—äº†ã€‚è¿™ä¸ªUIå…¥æ°´é‚£ä¸‹æ˜¯çœŸçš„æƒŠè‰³(å¥½æƒ³ç©P3Rå•Šå•Šå•Šå•Šï¼Œè°é€æˆ‘ä¸€ä¸ª)&lt;/p>
&lt;p>è¿™é‡Œæ”¾çš„æ˜¯mp4ï¼Œå› ä¸ºæˆ‘å‘ç°æˆ‘è¿™ä¸ªå›¾ç‰‡æ”¾å¤§çš„jsè²Œä¼¼ä¸æ”¯æŒavifï¼Œè€Œä¸”avifå’Œwepåœ¨åŠ è½½æ—¶ä¼šé—ªçƒ&lt;br>ä½†æ˜¯avifæ ¼å¼åªéœ€4Mï¼Œå¥ˆä½•&lt;a class="link" href="https://github.com/gohugoio/hugo/issues/7837" target="_blank" rel="noopener"
>é«˜è´¨é‡çš„åŸç”ŸGoç¼–ç å™¨&lt;/a>è¿˜æ²¡æœ‰ï¼Œæ”¾ä¸åˆ°å°é¢ä¸Š&lt;/p>
&lt;h1 id="è‡´è°¢">è‡´è°¢&lt;/h1>
&lt;p>Cover: &lt;a class="link" href="https://asia.sega.com/p3r/cn/" target="_blank" rel="noopener"
>P3R&lt;/a>&lt;br>
&lt;a class="link" href="https://github.com/journey-ad/Moe-Counter" target="_blank" rel="noopener"
>Moe-Counter&lt;/a>&lt;br>
&lt;a class="link" href="https://github.com/dsrkafuu/moe-counter-cf" target="_blank" rel="noopener"
>moe-counter-cf&lt;/a>&lt;br>
&lt;a class="link" href="https://champhoon.xyz/note/moe-counter-cf/" target="_blank" rel="noopener"
>å°†èŒèŒè®¡æ•°å™¨éƒ¨ç½²åˆ° Cloudflare Workers&lt;/a>&lt;/p></description></item></channel></rss>